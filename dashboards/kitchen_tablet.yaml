views:
  - title: Control Center
    path: kitchen_tablet
    icon: mdi:tablet-dashboard
    type: sections
    max_columns: 2
    theme: default

    header:
      card:
        type: markdown
        text_only: true
        content: |
          {% set h = now().hour %}
          {% if 5 <= h < 12 %}
            {% set greet = 'Good morning' %}
          {% elif 12 <= h < 17 %}
            {% set greet = 'Good afternoon' %}
          {% elif 17 <= h < 22 %}
            {% set greet = 'Good evening' %}
          {% else %}
            {% set greet = 'Good night' %}
          {% endif %}

          # {{ greet }}

          <div class="date-time-row">
            <span>{{ now().strftime('%A, %b %d') }}</span>
            <span>{{ now().strftime('%I:%M %p') }}</span>
          </div>
        card_mod:
          style: |
            ha-card {
              box-shadow: none;
              padding-top: 4px !important;
              padding-bottom: 4px !important;
            }
            h1 {
              text-align: center;
              margin-bottom: 4px !important;
            }
            .date-time-row {
              width: 100%;
              display: flex;
              justify-content: space-between;
              align-items: center;
              font-size: 1.05rem;
              padding: 0 16px;
              margin-top: 0 !important;
            }
      layout: center
      badges_position: bottom
      badges_wrap: scroll

    sections:

      # === TODAY / CALENDAR (FULL WIDTH) ===
      - type: grid
        column_span: 2
        cards:
          - type: heading
            heading: Today
            heading_style: title
            icon: mdi:calendar-clock
            grid_options:
              columns: full

          - type: custom:atomic-calendar-revive
            name: Upcoming Appointments
            enableModeChange: false
            defaultMode: Event
            maxDaysToShow: 30
            maxEventCount: 50
            showMonth: false
            showWeek: false
            showDate: false
            showProgressBar: false
            showCurrentEventLine: false
            sortByStartTime: true
            hideFinishedEvents: true
            hoursOnSameLine: true
            timeFormat: 12
            refreshInterval: 60
            entities:
              - entity: calendar.thesowus_gmail_com
              - entity: calendar.sowu_paul_gmail_com
              - entity: calendar.family
              - entity: calendar.augusta_eagles_varsity_boys_basketball
            grid_options:
              columns: full
            card_mod:
              style: |
                ha-card {
                  max-height: 260px;
                  overflow-y: auto;
                }


      # === LIGHTS STRIP (FULL WIDTH BAND, TALLER) ===
      - type: grid
        column_span: 2
        cards:
          - type: heading
            heading: Lights
            heading_style: title
            icon: mdi:lightbulb-group-outline
            grid_options:
              columns: full

          - type: grid
            columns: 5
            square: false
            grid_options:
              columns: full
            cards:
              - type: tile
                entity: light.kitchen_light_switch
                name: Kitchen Light
                card_mod:
                  style: |
                    ha-card {
                      min-height: 130px;
                    }

              - type: tile
                entity: light.great_room_fan_and_light
                name: Great Room Light
                card_mod:
                  style: |
                    ha-card {
                      min-height: 130px;
                    }

              - type: tile
                entity: fan.great_room_fan_and_light
                name: Great Room Fan
                card_mod:
                  style: |
                    ha-card {
                      min-height: 130px;
                    }

              - type: tile
                entity: media_player.living_room_tv_2
                name: Great Room TV
                icon: mdi:volume-high
                tap_action:
                  action: call-service
                  service: media_player.volume_mute
                  data:
                    is_volume_muted: true
                  target:
                    entity_id: media_player.living_room_tv_2
                double_tap_action:
                  action: call-service
                  service: media_player.volume_mute
                  data:
                    is_volume_muted: false
                  target:
                    entity_id: media_player.living_room_tv_2
                card_mod:
                  style: |
                    ha-card {
                      min-height: 130px;
                    }

              - type: tile
                entity: script.toggle_main_lights
                name: All Main Lights
                icon: mdi:lightbulb-multiple
                tap_action:
                  action: call-service
                  service: script.toggle_main_lights
                card_mod:
                  style: |
                    ha-card {
                      min-height: 130px;
                    }


      # === WEATHER & COMFORT (FULL WIDTH BAND) ===
      - type: grid
        column_span: 2
        cards:
          - type: heading
            heading: Weather & Comfort
            heading_style: title
            icon: mdi:weather-partly-cloudy
            grid_options:
              columns: full

          # Nested grid: Weather (current only), Thermostat, Indoor avg
          - type: grid
            columns: 3
            square: false
            grid_options:
              columns: full
            cards:
              - type: weather-forecast
                entity: weather.forecast_home
                show_forecast: false
                card_mod:
                  style: |
                    ha-card {
                      min-height: 90px;
                    }

              - type: thermostat
                entity: climate.thermostat
                name: Thermostat
                card_mod:
                  style: |
                    ha-card {
                      min-height: 90px;
                    }

              - type: tile
                entity: sensor.average_home_temperature
                name: Indoor avg
                color: blue
                card_mod:
                  style: |
                    ha-card {
                      min-height: 90px;
                      display: flex;
                      align-items: center;
                    } 


      # === FRONT DOOR (FULL WIDTH BAND) ===
      - type: grid
        column_span: 2
        cards:
          - type: heading
            heading: Front Door
            heading_style: title
            icon: mdi:shield-home
            grid_options:
              columns: full

          - type: grid
            columns: 2
            square: false
            grid_options:
              columns: full
            cards:
              - type: entities
                title: Front Door
                state_color: true
                entities:
                  - entity: switch.front_door_in_home_chime
                    name: In-Home Chime
                  - entity: switch.front_door_motion_detection
                    name: Motion Detection
                  - entity: switch.front_door_motion_detection_2
                    name: Motion Detection (Alt)
                  - entity: number.front_door_volume
                    name: Chime Volume
                  - entity: sensor.front_door_last_activity
                    name: Last Activity

              - type: picture-entity
                entity: camera.front_door_live_view_2
                name: Front Door
                camera_view: live

      # === PRESENCE & MAP (FULL WIDTH BAND) ===
      - type: grid
        column_span: 2
        cards:
          - type: heading
            heading: Presence & Map
            heading_style: title
            icon: mdi:account-group
            grid_options:
              columns: full

          - type: entities
            title: Presence
            grid_options:
              columns: full
            entities:
              - person.paul_sowu
              - person.tuella_sowu

          - type: map
            entities:
              - person.paul_sowu
              - person.tuella_sowu
              - zone.home
            dark_mode: true
            hours_to_show: 1
            default_zoom: 14
            grid_options:
              columns: full

      # === KITCHEN RANGE (LEAVE BEHAVIOR, ONLY WIDTH IF NEEDED) ===
      - type: grid
        column_span: 2
        cards:
          - type: heading
            heading: Kitchen Range
            heading_style: title
            icon: mdi:stove
            grid_options:
              columns: full

          - type: tile
            entity: sensor.range_operating_state
            name: Kitchen Range
            grid_options:
              columns: full
