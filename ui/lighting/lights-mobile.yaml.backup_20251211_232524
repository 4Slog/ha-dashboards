type: vertical-stack
cards:
  - type: heading
    heading: Lights
    heading_style: title
    icon: mdi:lightbulb-group-outline
    card_mod:
      style: |
        ha-card {
          font-size: 1.3rem !important;
          margin-bottom: 8px;
        }

  - type: grid
    columns: 2
    square: false
    card_mod:
      style: |
        ha-card {
          max-width: 100% !important;
          box-sizing: border-box !important;
          gap: 12px;
        }
    cards:
      # Great Room Light
      - type: custom:button-card
        entity: light.great_room_fan_and_light
        name: Great Room Light
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    const rgb = entity.attributes.rgb_color || [255, 255, 255];
                    return `linear-gradient(135deg, rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, 0.3) 0%, rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, 0.6) 100%)`;
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  if (entity.state === 'on') {
                    const rgb = entity.attributes.rgb_color || [255, 255, 255];
                    return `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;
                  }
                  return '#666';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
            - font-weight: 500
          state:
            - font-size: 0.85rem
            - margin-top: 4px
            - margin-top: 4px

      # Great Room Fan
      - type: custom:button-card
        entity: fan.great_room_fan_and_light
        name: Great Room Fan
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    return 'linear-gradient(135deg, #00c6ff 0%, #0072ff 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  return entity.state === 'on' ? '#00d4ff' : '#666';
                ]]]
            - animation: |
                [[[
                  return entity.state === 'on' ? 'rotation 2s linear infinite' : 'none';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
          state:
            - font-size: 0.85rem
            - margin-top: 4px

      # Dining Room Light
      - type: custom:button-card
        entity: light.dining_room_main_light
        name: Dining Room Light
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    return 'linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  return entity.state === 'on' ? '#fdcb6e' : '#666';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
          state:
            - font-size: 0.85rem
            - margin-top: 4px

      # Dining Room Fan
      - type: custom:button-card
        entity: fan.dining_room_main_fan
        name: Dining Room Fan
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    return 'linear-gradient(135deg, #74b9ff 0%, #0984e3 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  return entity.state === 'on' ? '#74b9ff' : '#666';
                ]]]
            - animation: |
                [[[
                  return entity.state === 'on' ? 'rotation 2s linear infinite' : 'none';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
          state:
            - font-size: 0.85rem
            - margin-top: 4px

      # Kitchen Light
      - type: custom:button-card
        entity: light.kitchen_light_switch
        name: Kitchen Light
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    return 'linear-gradient(135deg, #55efc4 0%, #00b894 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  return entity.state === 'on' ? '#00b894' : '#666';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
          state:
            - font-size: 0.85rem
            - margin-top: 4px

      # Master Hallway
      - type: custom:button-card
        entity: switch.master_hallway
        name: Master Hallway
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    return 'linear-gradient(135deg, #ff9ff3 0%, #ff6b9d 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  return entity.state === 'on' ? '#ff6b9d' : '#666';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
          state:
            - font-size: 0.85rem
            - margin-top: 4px

      # Master Bedroom Light
      - type: custom:button-card
        entity: light.master_bedroom
        name: Master Bedroom
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    return 'linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  return entity.state === 'on' ? '#a29bfe' : '#666';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
          state:
            - font-size: 0.85rem
            - margin-top: 4px

      # Master Bedroom Fan
      - type: custom:button-card
        entity: fan.master_bedroom
        name: Master Fan
        show_state: true
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  if (entity.state === 'on') {
                    return 'linear-gradient(135deg, #00cec9 0%, #0984e3 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  return entity.state === 'on' ? '#00cec9' : '#666';
                ]]]
            - animation: |
                [[[
                  return entity.state === 'on' ? 'rotation 2s linear infinite' : 'none';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
          state:
            - font-size: 0.85rem
            - margin-top: 4px

      # Common Area Toggle
      - type: custom:button-card
        name: Common Area
        icon: mdi:lightbulb-multiple
        show_state: false
        tap_action:
          action: call-service
          service: script.toggle_main_lights
        styles:
          card:
            - height: 150px
            - border-radius: 16px
            - box-shadow: 0 3px 8px rgba(0,0,0,0.15)
            - background: |
                [[[
                  const lights = [
                    states['light.great_room_fan_and_light'].state,
                    states['light.dining_room_main_light'].state,
                    states['light.kitchen_light_switch'].state,
                    states['switch.master_hallway'].state
                  ];
                  const anyOn = lights.some(s => s === 'on');
                  if (anyOn) {
                    return 'linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%)';
                  }
                  return 'linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%)';
                ]]]
          icon:
            - width: 44px
            - color: |
                [[[
                  const lights = [
                    states['light.great_room_fan_and_light'].state,
                    states['light.dining_room_main_light'].state,
                    states['light.kitchen_light_switch'].state,
                    states['switch.master_hallway'].state
                  ];
                  return lights.some(s => s === 'on') ? '#ffeaa7' : '#666';
                ]]]
          name:
            - font-size: 1.0rem
            - font-weight: 500
            - margin-top: 12px
