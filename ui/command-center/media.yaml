title: Media
path: media
icon: mdi:lightbulb-group-music
panel: true
theme: default

cards:
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr
      grid-auto-rows: min-content
      justify-content: stretch
      align-content: start
      gap: 16px
      padding: 16px

    cards:
      # === NAVIGATION RIBBON (TOP) ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: repeat(6, 1fr)
          gap: 10px
        cards:
          # Media Button (ACTIVE - WHITE BORDER)
          - type: custom:mushroom-template-card
            primary: Media
            icon: mdi:lightbulb-group-music
            icon_color: blue
            tap_action:
              action: navigate
              navigation_path: /command-center/media
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 6px 20px rgba(79, 172, 254, 0.6);
                  background: linear-gradient(135deg, rgba(79, 172, 254, 0.25) 0%, rgba(0, 242, 254, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 3px solid #FFFFFF;
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active { transform: scale(0.98); }

          # Lights Button
          - type: custom:mushroom-template-card
            primary: Lights
            icon: mdi:lightbulb-group
            icon_color: purple
            tap_action:
              action: navigate
              navigation_path: /command-center/home
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
                  background: linear-gradient(135deg, rgba(102, 126, 234, 0.25) 0%, rgba(118, 75, 162, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active { transform: scale(0.98); }

          # Weather Button
          - type: custom:mushroom-template-card
            primary: Weather
            icon: mdi:weather-partly-cloudy
            icon_color: blue
            tap_action:
              action: navigate
              navigation_path: /command-center/weather
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
                  background: linear-gradient(135deg, rgba(79, 172, 254, 0.25) 0%, rgba(0, 242, 254, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active { transform: scale(0.98); }

          # Calendar Button
          - type: custom:mushroom-template-card
            primary: Calendar
            icon: mdi:calendar-clock
            icon_color: green
            tap_action:
              action: navigate
              navigation_path: /command-center/calendar
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(67, 233, 123, 0.4);
                  background: linear-gradient(135deg, rgba(67, 233, 123, 0.25) 0%, rgba(56, 249, 215, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active { transform: scale(0.98); }

          # Family Button
          - type: custom:mushroom-template-card
            primary: Family
            icon: mdi:map-marker-account
            icon_color: purple
            tap_action:
              action: navigate
              navigation_path: /command-center/family
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(250, 112, 154, 0.4);
                  background: linear-gradient(135deg, rgba(250, 112, 154, 0.25) 0%, rgba(254, 225, 64, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active { transform: scale(0.98); }

          # Front Door Button
          - type: custom:mushroom-template-card
            primary: Front Door
            icon: mdi:shield-home
            icon_color: orange
            tap_action:
              action: navigate
              navigation_path: /command-center/frontdoor
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(240, 147, 251, 0.4);
                  background: linear-gradient(135deg, rgba(240, 147, 251, 0.25) 0%, rgba(245, 87, 108, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active { transform: scale(0.98); }

      # === HEADER ROW (ARROWS + DATE/TIME/GREETING) ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 70px auto 1fr auto 70px
          gap: 16px
          align-items: center
        cards:
          # Left Arrow
          - type: custom:button-card
            icon: mdi:chevron-left
            tap_action:
              action: navigate
              navigation_path: /command-center/frontdoor
            styles:
              card:
                - height: 70px
                - width: 70px
                - border-radius: 50%
                - background: rgba(74, 158, 255, 0.95)
                - box-shadow: 0 4px 16px rgba(74, 158, 255, 0.5)
              icon:
                - width: 42px
                - height: 42px
                - color: white
              grid:
                - grid-template-areas: '"i"'

          # Date
          - type: markdown
            content: |
              {{ now().strftime('%a, %b %d') }}
            card_mod:
              style: |
                ha-card {
                  box-shadow: none;
                  background: transparent;
                  padding: 8px 0 !important;
                  text-align: left;
                  font-size: 1.8rem;
                  font-weight: 500;
                }

          # Greeting (Center)
          - type: markdown
            content: |
              {% set h = now().hour %}
              {% if 5 <= h < 12 %}
                {% set greet = 'Good morning' %}
              {% elif 12 <= h < 17 %}
                {% set greet = 'Good afternoon' %}
              {% elif 17 <= h < 22 %}
                {% set greet = 'Good evening' %}
              {% else %}
                {% set greet = 'Good night' %}
              {% endif %}
              {{ greet }}
            card_mod:
              style: |
                ha-card {
                  box-shadow: none;
                  background: transparent;
                  padding: 8px 0 !important;
                  text-align: center;
                  font-size: 3.2rem;
                  font-weight: 600;
                }

          # Time
          - type: markdown
            content: |
              {{ now().strftime('%I:%M %p') }}
            card_mod:
              style: |
                ha-card {
                  box-shadow: none;
                  background: transparent;
                  padding: 8px 0 !important;
                  text-align: right;
                  font-size: 1.8rem;
                  font-weight: 500;
                }

          # Right Arrow
          - type: custom:button-card
            icon: mdi:chevron-right
            tap_action:
              action: navigate
              navigation_path: /command-center/home
            styles:
              card:
                - height: 70px
                - width: 70px
                - border-radius: 50%
                - background: rgba(74, 158, 255, 0.95)
                - box-shadow: 0 4px 16px rgba(74, 158, 255, 0.5)
              icon:
                - width: 42px
                - height: 42px
                - color: white
              grid:
                - grid-template-areas: '"i"'

      # === MEDIA BANNER WITH PHOTO TOGGLE ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 1fr auto
          gap: 16px
          align-items: center
        cards:
          - type: custom:button-card
            name: HOME MEDIA
            icon: mdi:lightbulb-group-music
            show_name: true
            show_icon: true
            tap_action:
              action: none
            styles:
              card:
                - height: 30px
                - border-radius: 8px
                - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
                - box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3)
                - padding: 0 12px
              grid:
                - grid-template-areas: '"i n"'
                - grid-template-columns: auto 1fr
              icon:
                - width: 18px
                - height: 18px
                - color: white
                - margin-right: 8px
              name:
                - font-size: 1.1rem
                - font-weight: 700
                - color: white
                - justify-self: start
                - letter-spacing: 0.5px

          - type: custom:button-card
            entity: input_boolean.media_photos_visible
            name: Photos
            icon: mdi:image-multiple
            show_name: true
            show_icon: true
            show_state: false
            tap_action:
              action: toggle
            styles:
              card:
                - height: 30px
                - border-radius: 8px
                - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                - padding: 0 12px
              grid:
                - grid-template-areas: '"i n"'
                - grid-template-columns: auto 1fr
              icon:
                - width: 18px
                - height: 18px
                - margin-right: 6px
              name:
                - font-size: 0.95rem
                - font-weight: 600
            state:
              - value: 'on'
                styles:
                  card:
                    - background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)
                  icon:
                    - color: white
                  name:
                    - color: white
              - value: 'off'
                styles:
                  card:
                    - background: linear-gradient(135deg, #757F9A 0%, #D7DDE8 100%)
                  icon:
                    - color: white
                  name:
                    - color: white

      # === MAIN CONTENT (Spotify + Google Photos) ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-rows: 280px 420px
          gap: 16px
        cards:
          # === SPOTIFY CONTROLS (Top 280px) ===
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 220px 1fr
              gap: 16px
            cards:
              # Album Art
              - type: custom:button-card
                entity: media_player.spotify_paul_sowu
                show_name: false
                show_state: false
                show_icon: false
                tap_action:
                  action: more-info
                styles:
                  card:
                    - width: 220px
                    - height: 220px
                    - border-radius: 12px
                    - background-size: cover
                    - background-position: center
                    - background-image: |
                        [[[
                          if (entity && entity.attributes && entity.attributes.entity_picture) {
                            return `url(${entity.attributes.entity_picture})`;
                          }
                          return 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        ]]]
                    - box-shadow: 0 4px 16px rgba(0,0,0,0.3)

              # Song Info + Controls + Favorites (NO VOLUME)
              - type: vertical-stack
                cards:
                  - type: markdown
                    content: |
                      {% if states('media_player.spotify_paul_sowu') != 'unavailable' %}
                        <div style="text-align: center; font-size: 1.6rem; font-weight: 700; margin-bottom: 8px;">
                          {{ state_attr('media_player.spotify_paul_sowu', 'media_title') or 'No Song Playing' }}
                        </div>
                        <div style="text-align: center; font-size: 1.2rem; color: #999;">
                          {{ state_attr('media_player.spotify_paul_sowu', 'media_artist') or '' }}
                        </div>
                      {% else %}
                        <div style="text-align: center; font-size: 1.6rem; font-weight: 700;">Spotify Unavailable</div>
                      {% endif %}
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none;
                          background: transparent;
                          padding: 12px 0 !important;
                        }

                  # Playback Controls
                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: repeat(5, 1fr)
                      gap: 12px
                    cards:
                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:shuffle
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.shuffle_set
                          service_data:
                            shuffle: |
                              [[[
                                return !(entity && entity.attributes && entity.attributes.shuffle);
                              ]]]
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: |
                                [[[
                                  if (entity && entity.attributes && entity.attributes.shuffle) {
                                    return 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)';
                                  }
                                  return 'rgba(255,255,255,0.1)';
                                ]]]
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 26px
                            - height: 26px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:skip-previous
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_previous_track
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_play_pause
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        icon: |
                          [[[
                            return (entity && entity.state === 'playing') ? 'mdi:pause' : 'mdi:play';
                          ]]]
                        styles:
                          card:
                            - width: 70px
                            - height: 70px
                            - border-radius: 50%
                            - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
                            - box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4)
                          icon:
                            - width: 36px
                            - height: 36px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:skip-next
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_next_track
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:repeat
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.repeat_set
                          service_data:
                            repeat: all
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 26px
                            - height: 26px
                            - color: white

                  # Quick Playlists (Favorites) - scroll, stays in this same column
                  - type: markdown
                    content: |
                      <div style="text-align:center;font-weight:700;letter-spacing:.6px;margin-top:6px;">
                        FAVORITES
                      </div>
                    card_mod:
                      style: |
                        ha-card {
                          background: transparent;
                          box-shadow: none;
                          padding: 0 !important;
                          margin-top: 6px;
                        }

                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: 1fr
                      gap: 10px
                    card_mod:
                      style: |
                        ha-card {
                          background: transparent;
                          box-shadow: none;
                          padding: 0 !important;
                          max-height: 110px;
                          overflow: auto;
                        }
                    cards:
                      - type: custom:mushroom-template-card
                        primary: Favorite Playlist 1
                        secondary: spotify:playlist:16EIqiWgTZthuA32e1KrZw
                        icon: mdi:playlist-music
                        icon_color: blue
                        tap_action:
                          action: call-service
                          service: media_player.play_media
                          target:
                            entity_id: media_player.spotify_paul_sowu
                          data:
                            media_content_type: playlist
                            media_content_id: spotify:playlist:16EIqiWgTZthuA32e1KrZw

                      - type: custom:mushroom-template-card
                        primary: Favorite Playlist 2
                        secondary: spotify:playlist:1LjTwJW7vz5MiEVZCwBOhr
                        icon: mdi:playlist-music
                        icon_color: blue
                        tap_action:
                          action: call-service
                          service: media_player.play_media
                          target:
                            entity_id: media_player.spotify_paul_sowu
                          data:
                            media_content_type: playlist
                            media_content_id: spotify:playlist:1LjTwJW7vz5MiEVZCwBOhr

                      - type: custom:mushroom-template-card
                        primary: Favorite Playlist 3
                        secondary: spotify:playlist:0pwtPFYePn1xdpavFkurnh
                        icon: mdi:playlist-music
                        icon_color: blue
                        tap_action:
                          action: call-service
                          service: media_player.play_media
                          target:
                            entity_id: media_player.spotify_paul_sowu
                          data:
                            media_content_type: playlist
                            media_content_id: spotify:playlist:0pwtPFYePn1xdpavFkurnh

          # === GOOGLE PHOTOS (Bottom 420px) ===
          - type: conditional
            conditions:
              - entity: input_boolean.media_photos_visible
                state: 'on'
            card:
              type: markdown
              content: |
                <div style="text-align: center; padding: 160px 32px; font-size: 1.5rem; color: #999;">
                  Google Photos slideshow will appear here<br><br>
                  <small>Next step: replace this with the Google Photos album camera entity.</small>
                </div>
              card_mod:
                style: |
                  ha-card {
                    height: 420px;
                    border-radius: 16px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    background: #1a1a1a;
                  }

          - type: conditional
            conditions:
              - entity: input_boolean.media_photos_visible
                state: 'off'
            card:
              type: custom:button-card
              name: Photos Hidden
              icon: mdi:image-off
              show_name: true
              show_icon: true
              tap_action:
                action: toggle
                target:
                  entity_id: input_boolean.media_photos_visible
              styles:
                card:
                  - height: 420px
                  - border-radius: 16px
                  - background: '#000000'
                  - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                grid:
                  - grid-template-areas: '"i" "n"'
                  - grid-template-rows: 1fr auto
                icon:
                  - width: 64px
                  - height: 64px
                  - color: '#333333'
                  - margin-bottom: 16px
                name:
                  - font-size: 1.5rem
                  - font-weight: 600
                  - color: '#333333'
