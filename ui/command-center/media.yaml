title: Media
path: media
icon: mdi:spotify
panel: true
theme: default

cards:
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr
      grid-auto-rows: min-content
      justify-content: stretch
      align_content: start
      gap: 16px
      padding: 16px

    cards:
      # === HEADER (NAV + DATE/TIME) ===
      - !include components/header-media.yaml

      # === MEDIA BANNER WITH PHOTO TOGGLE ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 1fr auto
          gap: 16px
          align-items: center
        cards:
          - type: custom:button-card
            name: HOME MEDIA
            icon: mdi:spotify
            show_name: true
            show_icon: true
            tap_action:
              action: none
            styles:
              card:
                - height: 30px
                - border-radius: 8px
                - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
                - box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3)
                - padding: 0 12px
              grid:
                - grid-template-areas: '"i n"'
                - grid-template-columns: auto 1fr
              icon:
                - width: 18px
                - height: 18px
                - color: white
                - margin-right: 8px
              name:
                - font-size: 1.1rem
                - font-weight: 700
                - color: white
                - justify-self: start
                - letter-spacing: 0.5px
            card_mod:
              style: |
                @media (max-width: 1400px) {
                  ha-card {
                    height: 26px !important;
                  }
                  ha-card .name {
                    font-size: 0.95rem !important;
                  }
                }

          - type: custom:button-card
            entity: input_boolean.media_photos_visible
            name: Photos
            icon: mdi:image-multiple
            show_name: true
            show_icon: true
            show_state: false
            tap_action:
              action: toggle
            styles:
              card:
                - height: 30px
                - border-radius: 8px
                - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                - padding: 0 12px
              grid:
                - grid-template-areas: '"i n"'
                - grid-template-columns: auto 1fr
              icon:
                - width: 18px
                - height: 18px
                - margin-right: 6px
              name:
                - font-size: 0.95rem
                - font-weight: 600
            state:
              - value: 'on'
                styles:
                  card:
                    - background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)
                  icon:
                    - color: white
                  name:
                    - color: white
              - value: 'off'
                styles:
                  card:
                    - background: linear-gradient(135deg, #757F9A 0%, #D7DDE8 100%)
                  icon:
                    - color: white
                  name:
                    - color: white
            card_mod:
              style: |
                @media (max-width: 1400px) {
                  ha-card {
                    height: 26px !important;
                  }
                  ha-card .name {
                    font-size: 0.85rem !important;
                  }
                }

      # === MAIN CONTENT (Spotify + Google Photos) ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-rows: 280px 420px
          gap: 16px
        card_mod:
          style: |
            @media (max-width: 1400px) {
              ha-card {
                --grid-template-rows: 220px 280px;
                --gap: 12px;
              }
            }
        cards:
          # === SPOTIFY CONTROLS (Top 280px) ===
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 220px 1fr
              gap: 16px
            card_mod:
              style: |
                @media (max-width: 1400px) {
                  ha-card {
                    --grid-template-columns: 160px 1fr;
                    --gap: 12px;
                  }
                }
            cards:
              # Album Art
              - type: custom:button-card
                entity: media_player.spotify_paul_sowu
                show_name: false
                show_state: false
                show_icon: false
                tap_action:
                  action: more-info
                styles:
                  card:
                    - width: 220px
                    - height: 220px
                    - border-radius: 12px
                    - background-size: cover
                    - background-position: center
                    - background-image: |
                        [[[
                          if (entity && entity.attributes && entity.attributes.entity_picture) {
                            return `url(${entity.attributes.entity_picture})`;
                          }
                          return 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        ]]]
                    - box-shadow: 0 4px 16px rgba(0,0,0,0.3)
                card_mod:
                  style: |
                    @media (max-width: 1400px) {
                      ha-card {
                        width: 160px !important;
                        height: 160px !important;
                        border-radius: 10px !important;
                      }
                    }

              # Song Info + Controls + Favorites (NO VOLUME)
              - type: vertical-stack
                cards:
                  - type: markdown
                    content: |
                      {% if states('media_player.spotify_paul_sowu') != 'unavailable' %}
                        <div style="text-align: center; font-size: 1.6rem; font-weight: 700; margin-bottom: 8px;">
                          {{ state_attr('media_player.spotify_paul_sowu', 'media_title') or 'No Song Playing' }}
                        </div>
                        <div style="text-align: center; font-size: 1.2rem; color: #999;">
                          {{ state_attr('media_player.spotify_paul_sowu', 'media_artist') or '' }}
                        </div>
                      {% else %}
                        <div style="text-align: center; font-size: 1.6rem; font-weight: 700;">Spotify Unavailable</div>
                      {% endif %}
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none;
                          background: transparent;
                          padding: 12px 0 !important;
                        }
                        @media (max-width: 1400px) {
                          ha-card {
                            padding: 6px 0 !important;
                          }
                          ha-card ha-markdown {
                            font-size: 0.9rem !important;
                          }
                        }

                  # Playback Controls
                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: repeat(5, 1fr)
                      gap: 12px
                    card_mod:
                      style: |
                        @media (max-width: 1400px) {
                          ha-card {
                            --gap: 8px;
                          }
                        }
                    cards:
                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:shuffle
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.shuffle_set
                          service_data:
                            shuffle: |
                              [[[
                                return !(entity && entity.attributes && entity.attributes.shuffle);
                              ]]]
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: |
                                [[[
                                  if (entity && entity.attributes && entity.attributes.shuffle) {
                                    return 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)';
                                  }
                                  return 'rgba(255,255,255,0.1)';
                                ]]]
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 26px
                            - height: 26px
                            - color: white
                        card_mod:
                          style: |
                            @media (max-width: 1400px) {
                              ha-card {
                                width: 42px !important;
                                height: 42px !important;
                              }
                              ha-card ha-icon {
                                --mdc-icon-size: 20px;
                              }
                            }

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:skip-previous
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_previous_track
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: white
                        card_mod:
                          style: |
                            @media (max-width: 1400px) {
                              ha-card {
                                width: 42px !important;
                                height: 42px !important;
                              }
                              ha-card ha-icon {
                                --mdc-icon-size: 22px;
                              }
                            }

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_play_pause
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        icon: |
                          [[[
                            return (entity && entity.state === 'playing') ? 'mdi:pause' : 'mdi:play';
                          ]]]
                        styles:
                          card:
                            - width: 70px
                            - height: 70px
                            - border-radius: 50%
                            - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
                            - box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4)
                          icon:
                            - width: 36px
                            - height: 36px
                            - color: white
                        card_mod:
                          style: |
                            @media (max-width: 1400px) {
                              ha-card {
                                width: 54px !important;
                                height: 54px !important;
                              }
                              ha-card ha-icon {
                                --mdc-icon-size: 28px;
                              }
                            }

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:skip-next
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_next_track
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: white
                        card_mod:
                          style: |
                            @media (max-width: 1400px) {
                              ha-card {
                                width: 42px !important;
                                height: 42px !important;
                              }
                              ha-card ha-icon {
                                --mdc-icon-size: 22px;
                              }
                            }

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:repeat
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.repeat_set
                          service_data:
                            repeat: all
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 26px
                            - height: 26px
                            - color: white
                        card_mod:
                          style: |
                            @media (max-width: 1400px) {
                              ha-card {
                                width: 42px !important;
                                height: 42px !important;
                              }
                              ha-card ha-icon {
                                --mdc-icon-size: 20px;
                              }
                            }

                  # Quick Playlists (Favorites) - scroll, stays in this same column
                  - type: markdown
                    content: |
                      <div style="text-align:center;font-weight:700;letter-spacing:.6px;margin-top:6px;">
                        FAVORITES
                      </div>
                    card_mod:
                      style: |
                        ha-card {
                          background: transparent;
                          box-shadow: none;
                          padding: 0 !important;
                          margin-top: 6px;
                        }
                        @media (max-width: 1400px) {
                          ha-card {
                            margin-top: 2px;
                          }
                          ha-card ha-markdown {
                            font-size: 0.85rem !important;
                          }
                        }

                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: 1fr
                      gap: 10px
                    card_mod:
                      style: |
                        ha-card {
                          background: transparent;
                          box-shadow: none;
                          padding: 0 !important;
                          max-height: 110px;
                          overflow: auto;
                        }
                        @media (max-width: 1400px) {
                          ha-card {
                            max-height: 80px;
                            --gap: 6px;
                          }
                        }
                    cards:
                      - type: custom:mushroom-template-card
                        primary: Favorite Playlist 1
                        secondary: spotify:playlist:16EIqiWgTZthuA32e1KrZw
                        icon: mdi:playlist-music
                        icon_color: blue
                        tap_action:
                          action: call-service
                          service: media_player.play_media
                          target:
                            entity_id: media_player.spotify_paul_sowu
                          data:
                            media_content_type: playlist
                            media_content_id: spotify:playlist:16EIqiWgTZthuA32e1KrZw

                      - type: custom:mushroom-template-card
                        primary: Favorite Playlist 2
                        secondary: spotify:playlist:1LjTwJW7vz5MiEVZCwBOhr
                        icon: mdi:playlist-music
                        icon_color: blue
                        tap_action:
                          action: call-service
                          service: media_player.play_media
                          target:
                            entity_id: media_player.spotify_paul_sowu
                          data:
                            media_content_type: playlist
                            media_content_id: spotify:playlist:1LjTwJW7vz5MiEVZCwBOhr

                      - type: custom:mushroom-template-card
                        primary: Favorite Playlist 3
                        secondary: spotify:playlist:0pwtPFYePn1xdpavFkurnh
                        icon: mdi:playlist-music
                        icon_color: blue
                        tap_action:
                          action: call-service
                          service: media_player.play_media
                          target:
                            entity_id: media_player.spotify_paul_sowu
                          data:
                            media_content_type: playlist
                            media_content_id: spotify:playlist:0pwtPFYePn1xdpavFkurnh

          # === GOOGLE PHOTOS (Bottom 420px) ===
          - type: conditional
            conditions:
              - entity: input_boolean.media_photos_visible
                state: 'on'
            card:
              type: markdown
              content: |
                <div style="text-align: center; padding: 160px 32px; font-size: 1.5rem; color: #999;">
                  Google Photos slideshow will appear here<br><br>
                  <small>Next step: replace this with the Google Photos album camera entity.</small>
                </div>
              card_mod:
                style: |
                  ha-card {
                    height: 420px;
                    border-radius: 16px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    background: #1a1a1a;
                  }
                  @media (max-width: 1400px) {
                    ha-card {
                      height: 280px;
                      border-radius: 12px;
                    }
                  }

          - type: conditional
            conditions:
              - entity: input_boolean.media_photos_visible
                state: 'off'
            card:
              type: custom:button-card
              name: Photos Hidden
              icon: mdi:image-off
              show_name: true
              show_icon: true
              tap_action:
                action: toggle
                target:
                  entity_id: input_boolean.media_photos_visible
              styles:
                card:
                  - height: 420px
                  - border-radius: 16px
                  - background: '#000000'
                  - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                grid:
                  - grid-template-areas: '"i" "n"'
                  - grid-template-rows: 1fr auto
                icon:
                  - width: 64px
                  - height: 64px
                  - color: '#333333'
                  - margin-bottom: 16px
                name:
                  - font-size: 1.5rem
                  - font-weight: 600
                  - color: '#333333'
              card_mod:
                style: |
                  @media (max-width: 1400px) {
                    ha-card {
                      height: 280px !important;
                      border-radius: 12px !important;
                    }
                    ha-card .icon {
                      width: 48px !important;
                      height: 48px !important;
                    }
                    ha-card .name {
                      font-size: 1.2rem !important;
                    }
                  }
