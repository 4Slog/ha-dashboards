title: Home
path: home
icon: mdi:home
panel: true
theme: default

cards:
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr
      grid-auto-rows: min-content
      justify-content: stretch
      align-content: start
      gap: 0px
      padding: 0px

    card_mod:
      style: |
        ha-card {
          max-width: 100vw !important;
          overflow-x: hidden !important;
          box-sizing: border-box !important;
        }

    cards:
      # === STICKY HEADER CONTAINER (Greeting + Nav Ribbon) ===
      - type: vertical-stack
        cards:
          # === GREETING ===
          - type: markdown
            content: |
              {% if is_state('person.paul_sowu', 'home') and is_state('person.tuella_sowu', 'home') %}
                {% set name = 'Paul & Tuella' %}
              {% elif is_state('person.paul_sowu', 'home') %}
                {% set name = 'Paul' %}
              {% elif is_state('person.tuella_sowu', 'home') %}
                {% set name = 'Tuella' %}
              {% else %}
                {% set name = '' %}
              {% endif %}
              
              {% set h = now().hour %}
              {% if 5 <= h < 12 %}
                {% set greet = 'Good morning' %}
              {% elif 12 <= h < 17 %}
                {% set greet = 'Good afternoon' %}
              {% elif 17 <= h < 22 %}
                {% set greet = 'Good evening' %}
              {% else %}
                {% set greet = 'Good night' %}
              {% endif %}

              <h1>{{ greet }}{% if name %}, {{ name }}{% endif %}</h1>

              <div class="date-time-row">
                <span class="date">{{ now().strftime('%A, %b %d') }}</span>
                <span class="time">{{ now().strftime('%I:%M %p') }}</span>
              </div>
            card_mod:
              style: |
                ha-card {
                  box-shadow: none;
                  background: var(--card-background-color, #1c1c1c);
                  padding: 12px 16px 8px 16px !important;
                }
                h1 {
                  text-align: center;
                  margin-bottom: 8px !important;
                  font-size: 1.8rem !important;
                }
                .date-time-row {
                  width: 100%;
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  font-size: 1.0rem;
                  padding: 0 4px;
                  margin-top: 0 !important;
                }
                
                /* Landscape mode - larger text */
                @media (orientation: landscape) {
                  h1 {
                    font-size: 2.0rem !important;
                  }
                  .date-time-row {
                    font-size: 1.1rem;
                  }
                }

          # === HORIZONTAL SCROLLABLE NAV RIBBON ===
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-auto-flow: column
              grid-auto-columns: 140px
              gap: 12px
              padding: 8px 16px
            cards:
              # Weather Button
              - type: custom:mushroom-template-card
                primary: Weather
                icon: mdi:weather-partly-cloudy
                icon_color: blue
                tap_action:
                  action: navigate
                  navigation_path: /mobile-dashboard/weather
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 16px;
                      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
                      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
                      transition: all 0.3s ease;
                      min-height: 80px;
                      font-size: 1.0rem !important;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    }
                    ha-card:active {
                      transform: scale(0.98);
                    }

              # Calendar Button
              - type: custom:mushroom-template-card
                primary: Calendar
                icon: mdi:calendar-clock
                icon_color: green
                tap_action:
                  action: navigate
                  navigation_path: /mobile-dashboard/calendar
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 16px;
                      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
                      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
                      transition: all 0.3s ease;
                      min-height: 80px;
                      font-size: 1.0rem !important;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    }
                    ha-card:active {
                      transform: scale(0.98);
                    }

              # Family Location Button
              - type: custom:mushroom-template-card
                primary: Family
                icon: mdi:map-marker-account
                icon_color: purple
                tap_action:
                  action: navigate
                  navigation_path: /mobile-dashboard/family
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 16px;
                      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
                      background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
                      transition: all 0.3s ease;
                      min-height: 80px;
                      font-size: 1.0rem !important;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    }
                    ha-card:active {
                      transform: scale(0.98);
                    }

              # Front Door Button
              - type: custom:mushroom-template-card
                primary: Front Door
                icon: mdi:shield-home
                icon_color: orange
                tap_action:
                  action: navigate
                  navigation_path: /mobile-dashboard/frontdoor
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 16px;
                      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
                      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                      transition: all 0.3s ease;
                      min-height: 80px;
                      font-size: 1.0rem !important;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                    }
                    ha-card:active {
                      transform: scale(0.98);
                    }
            card_mod:
              style: |
                ha-card {
                  overflow-x: auto !important;
                  overflow-y: hidden !important;
                  scrollbar-width: none !important;
                  -ms-overflow-style: none !important;
                  -webkit-overflow-scrolling: touch !important;
                  box-shadow: none;
                  background: transparent;
                }
                ha-card::-webkit-scrollbar {
                  display: none !important;
                }
        card_mod:
          style: |
            ha-card {
              position: sticky !important;
              top: 0 !important;
              z-index: 999 !important;
              background: var(--card-background-color, #1c1c1c);
              padding-bottom: 8px !important;
              max-width: 100vw !important;
              overflow-x: hidden !important;
              box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            }

      # === LIGHTS SECTION (VERTICAL SCROLL ONLY) ===
      - type: vertical-stack
        cards:
          - !include ../lighting/lights-mobile.yaml
        card_mod:
          style: |
            ha-card {
              padding: 12px 16px;
              background: transparent;
              box-shadow: none;
              max-width: 100vw !important;
              overflow-x: hidden !important;
            }
