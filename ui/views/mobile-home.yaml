title: Home
path: home
icon: mdi:home
panel: true
theme: default

cards:
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr
      grid-auto-rows: min-content
      justify-content: stretch
      align-content: start
      gap: 0px
      padding: 0px

    card_mod:
      style: |
        ha-card {
          max-width: 100vw !important;
          overflow-x: hidden !important;
          box-sizing: border-box !important;
        }

    cards:
      # === GREETING ===
      - type: markdown
        content: |
          {% if is_state('person.paul_sowu', 'home') and is_state('person.tuella_sowu', 'home') %}
            {% set name = 'Paul & Tuella' %}
          {% elif is_state('person.paul_sowu', 'home') %}
            {% set name = 'Paul' %}
          {% elif is_state('person.tuella_sowu', 'home') %}
            {% set name = 'Tuella' %}
          {% else %}
            {% set name = '' %}
          {% endif %}

          {% set h = now().hour %}
          {% if 5 <= h < 12 %}
            {% set greet = 'Good morning' %}
          {% elif 12 <= h < 17 %}
            {% set greet = 'Good afternoon' %}
          {% elif 17 <= h < 22 %}
            {% set greet = 'Good evening' %}
          {% else %}
            {% set greet = 'Good night' %}
          {% endif %}

          <h1>{{ greet }}{% if name %}, {{ name }}{% endif %}</h1>

          <div class="date-time-row">
            <span class="date">{{ now().strftime('%A, %b %d') }}</span>
            <span class="time">{{ now().strftime('%I:%M %p') }}</span>
          </div>
        card_mod:
          style: |
            ha-card {
              box-shadow: none;
              background: var(--card-background-color, #1c1c1c);
              padding: 12px 16px 8px 16px !important;
            }
            h1 {
              text-align: center;
              margin-bottom: 8px !important;
              font-size: 1.8rem !important;
            }
            .date-time-row {
              width: 100%;
              display: flex;
              justify-content: space-between;
              align-items: center;
              font-size: 1.0rem;
              padding: 0 4px;
              margin-top: 0 !important;
            }
            @media (orientation: landscape) {
              h1 { font-size: 2.0rem !important; }
              .date-time-row { font-size: 1.1rem; }
            }

      # === LIGHTS SECTION (VERTICAL SCROLL ONLY) ===
      - type: vertical-stack
        cards:
          - !include ../lighting/lights-mobile.yaml
        card_mod:
          style: |
            ha-card {
              padding: 12px 16px;
              background: transparent;
              box-shadow: none;
              max-width: 100vw !important;
              overflow-x: hidden !important;
            }
