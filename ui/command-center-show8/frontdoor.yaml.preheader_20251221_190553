title: Front Door
path: frontdoor
icon: mdi:shield-home
panel: true
theme: default

cards:
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr
      grid-auto-rows: min-content
      justify-content: stretch
      align_content: start
      gap: 16px
      padding: 16px
    cards:
      # === HEADER (DATE | GREETING | TIME) ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: auto 1fr auto
          gap: 32px
        cards:
          - type: markdown
            content: |
              {{ now().strftime('%A, %b %d') }}
            card_mod:
              style: |
                ha-card {
                  box-shadow: none;
                  background: transparent;
                  padding: 8px 0 !important;
                  text-align: left;
                  font-size: 1.8rem;
                  font-weight: 500;
                }
          - type: markdown
            content: |
              {% set h = now().hour %}
              {% if 5 <= h < 12 %}
                {% set greet = 'Good morning' %}
              {% elif 12 <= h < 17 %}
                {% set greet = 'Good afternoon' %}
              {% elif 17 <= h < 22 %}
                {% set greet = 'Good evening' %}
              {% else %}
                {% set greet = 'Good night' %}
              {% endif %}
              {{ greet }}
            card_mod:
              style: |
                ha-card {
                  box-shadow: none;
                  background: transparent;
                  padding: 8px 0 !important;
                  text-align: center;
                  font-size: 3.2rem;
                  font-weight: 600;
                }
          - type: markdown
            content: |
              {{ now().strftime('%I:%M %p') }}
            card_mod:
              style: |
                ha-card {
                  box-shadow: none;
                  background: transparent;
                  padding: 8px 0 !important;
                  text-align: right;
                  font-size: 1.8rem;
                  font-weight: 500;
                }

      # === 5-BUTTON RIBBON ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: repeat(6, 1fr)
          gap: 10px
        cards:
          # Media Button
          - type: custom:mushroom-template-card
            primary: Media
            icon: mdi:lightbulb-group-music
            icon_color: blue
            tap_action:
              action: navigate
              navigation_path: /command-center/media
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
                  background: linear-gradient(135deg, rgba(79, 172, 254, 0.25) 0%, rgba(0, 242, 254, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active {
                  transform: scale(0.98);
                }

          # Lights Button
          - type: custom:mushroom-template-card
            primary: Lights
            icon: mdi:lightbulb-group
            icon_color: purple
            tap_action:
              action: navigate
              navigation_path: /command-center/home
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
                  background: linear-gradient(135deg, rgba(102, 126, 234, 0.25) 0%, rgba(118, 75, 162, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active {
                  transform: scale(0.98);
                }

          # Weather Button
          - type: custom:mushroom-template-card
            primary: Weather
            icon: mdi:weather-partly-cloudy
            icon_color: blue
            tap_action:
              action: navigate
              navigation_path: /command-center/weather
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(79, 172, 254, 0.4);
                  background: linear-gradient(135deg, rgba(79, 172, 254, 0.25) 0%, rgba(0, 242, 254, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active {
                  transform: scale(0.98);
                }

          # Calendar Button
          - type: custom:mushroom-template-card
            primary: Calendar
            icon: mdi:calendar-clock
            icon_color: green
            tap_action:
              action: navigate
              navigation_path: /command-center/calendar
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(67, 233, 123, 0.4);
                  background: linear-gradient(135deg, rgba(67, 233, 123, 0.25) 0%, rgba(56, 249, 215, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active {
                  transform: scale(0.98);
                }

          # Family Button
          - type: custom:mushroom-template-card
            primary: Family
            icon: mdi:map-marker-account
            icon_color: purple
            tap_action:
              action: navigate
              navigation_path: /command-center/family
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 4px 12px rgba(250, 112, 154, 0.4);
                  background: linear-gradient(135deg, rgba(250, 112, 154, 0.25) 0%, rgba(254, 225, 64, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 2px solid rgba(255, 255, 255, 0.2);
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active {
                  transform: scale(0.98);
                }

          # Front Door Button (ACTIVE)
          - type: custom:mushroom-template-card
            primary: Front Door
            icon: mdi:shield-home
            icon_color: orange
            tap_action:
              action: navigate
              navigation_path: /command-center/frontdoor
            card_mod:
              style: |
                ha-card {
                  border-radius: 16px;
                  box-shadow: 0 6px 20px rgba(240, 147, 251, 0.6);
                  background: linear-gradient(135deg, rgba(240, 147, 251, 0.25) 0%, rgba(245, 87, 108, 0.25) 100%);
                  transition: all 0.3s ease;
                  height: 50px;
                  border: 3px solid #FFFFFF;
                  font-size: 1.6rem !important;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
                ha-card:active {
                  transform: scale(0.98);
                }

      # === ARROWS ===
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            icon: mdi:chevron-left
            tap_action:
              action: navigate
              navigation_path: /command-center/family
            styles:
              card:
                - height: 70px
                - width: 70px
                - border-radius: 50%
                - background: rgba(74, 158, 255, 0.95)
                - box-shadow: 0 4px 16px rgba(74, 158, 255, 0.5)
              icon:
                - width: 42px
                - height: 42px
                - color: white
              grid:
                - grid-template-areas: '"i"'
          - type: custom:button-card
            color_type: blank-card
            styles:
              card:
                - background: transparent
                - box-shadow: none
          - type: custom:button-card
            icon: mdi:chevron-right
            tap_action:
              action: navigate
              navigation_path: /command-center/media
            styles:
              card:
                - height: 70px
                - width: 70px
                - border-radius: 50%
                - background: rgba(74, 158, 255, 0.95)
                - box-shadow: 0 4px 16px rgba(74, 158, 255, 0.5)
              icon:
                - width: 42px
                - height: 42px
                - color: white
              grid:
                - grid-template-areas: '"i"'

      # === FRONT DOOR BANNER (30px height) ===
      - type: custom:button-card
        name: FRONT DOOR
        icon: mdi:shield-home
        show_name: true
        show_icon: true
        tap_action:
          action: none
        styles:
          card:
            - height: 30px
            - border-radius: 8px
            - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
            - box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3)
            - padding: 0 12px
          grid:
            - grid-template-areas: '"i n"'
            - grid-template-columns: auto 1fr
          icon:
            - width: 18px
            - height: 18px
            - color: white
            - margin-right: 8px
          name:
            - font-size: 1.1rem
            - font-weight: 700
            - color: white
            - justify-self: start
            - letter-spacing: 0.5px

      # === MAIN CONTENT CONTAINER (FIXED HEIGHT) ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 1fr
        card_mod:
          style: |
            ha-card {
              height: 500px;
              overflow: hidden;
              box-shadow: none;
              background: transparent;
            }
        cards:
          # MAIN CONTENT: CONTROLS (20%) + CAMERA (80%)
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 20% 80%
              gap: 16px
            cards:
              # LEFT COLUMN: VERTICAL CONTROLS (20%)
              - type: vertical-stack
                cards:
                  # Chime
                  - type: custom:button-card
                    entity: switch.front_door_in_home_chime
                    name: Chime
                    icon: mdi:bell-ring
                    show_icon: true
                    show_name: true
                    show_state: false
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - height: 80px
                        - border-radius: 12px
                        - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                      grid:
                        - grid-template-areas: '"i" "n"'
                        - grid-template-rows: 1fr auto
                      icon:
                        - width: 32px
                        - height: 32px
                        - margin-bottom: 8px
                      name:
                        - font-size: 1.1rem
                        - font-weight: 600
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)
                          icon:
                            - color: white
                          name:
                            - color: white
                      - value: 'off'
                        styles:
                          card:
                            - background: linear-gradient(135deg, #757F9A 0%, #D7DDE8 100%)
                          icon:
                            - color: white
                          name:
                            - color: white

                  # Motion Detection
                  - type: custom:button-card
                    entity: switch.front_door_motion_detection
                    name: Motion
                    icon: mdi:motion-sensor
                    show_icon: true
                    show_name: true
                    show_state: false
                    tap_action:
                      action: toggle
                    styles:
                      card:
                        - height: 80px
                        - border-radius: 12px
                        - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                      grid:
                        - grid-template-areas: '"i" "n"'
                        - grid-template-rows: 1fr auto
                      icon:
                        - width: 32px
                        - height: 32px
                        - margin-bottom: 8px
                      name:
                        - font-size: 1.1rem
                        - font-weight: 600
                    state:
                      - value: 'on'
                        styles:
                          card:
                            - background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)
                          icon:
                            - color: white
                          name:
                            - color: white
                      - value: 'off'
                        styles:
                          card:
                            - background: linear-gradient(135deg, #757F9A 0%, #D7DDE8 100%)
                          icon:
                            - color: white
                          name:
                            - color: white

                  # Volume
                  - type: custom:button-card
                    entity: number.front_door_volume
                    name: |
                      [[[
                        return 'Volume ' + entity.state;
                      ]]]
                    icon: mdi:volume-high
                    show_icon: true
                    show_name: true
                    show_state: false
                    tap_action:
                      action: more-info
                    styles:
                      card:
                        - height: 80px
                        - border-radius: 12px
                        - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                        - background: linear-gradient(135deg, #fa709a 0%, #fee140 100%)
                      grid:
                        - grid-template-areas: '"i" "n"'
                        - grid-template-rows: 1fr auto
                      icon:
                        - width: 32px
                        - height: 32px
                        - color: white
                        - margin-bottom: 8px
                      name:
                        - font-size: 1.1rem
                        - font-weight: 600
                        - color: white

                  # Battery
                  - type: custom:button-card
                    entity: sensor.front_door_battery
                    name: |
                      [[[
                        return 'Battery ' + entity.state + '%';
                      ]]]
                    icon: mdi:battery
                    show_icon: true
                    show_name: true
                    show_state: false
                    tap_action:
                      action: more-info
                    styles:
                      card:
                        - height: 80px
                        - border-radius: 12px
                        - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                        - background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%)
                      grid:
                        - grid-template-areas: '"i" "n"'
                        - grid-template-rows: 1fr auto
                      icon:
                        - width: 32px
                        - height: 32px
                        - color: white
                        - margin-bottom: 8px
                      name:
                        - font-size: 1.1rem
                        - font-weight: 600
                        - color: white

                  # Last Activity
                  - type: custom:button-card
                    entity: sensor.front_door_last_activity
                    name: |
                      [[[
                        const state = entity.state;
                        if (state && state !== 'unknown' && state !== 'unavailable') {
                          const time = new Date(state);
                          const now = new Date();
                          const diff = Math.floor((now - time) / 60000);
                          if (diff < 1) return 'Just now';
                          if (diff < 60) return diff + 'm ago';
                          const hours = Math.floor(diff / 60);
                          if (hours < 24) return hours + 'h ago';
                          return Math.floor(hours / 24) + 'd ago';
                        }
                        return 'Activity';
                      ]]]
                    icon: mdi:clock-outline
                    show_icon: true
                    show_name: true
                    show_state: false
                    tap_action:
                      action: more-info
                    styles:
                      card:
                        - height: 80px
                        - border-radius: 12px
                        - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                        - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
                      grid:
                        - grid-template-areas: '"i" "n"'
                        - grid-template-rows: 1fr auto
                      icon:
                        - width: 32px
                        - height: 32px
                        - color: white
                        - margin-bottom: 8px
                      name:
                        - font-size: 1.1rem
                        - font-weight: 600
                        - color: white

              # RIGHT COLUMN: CAMERA (1500px Ã— 500px RECTANGLE)
              - type: picture-entity
                entity: camera.10_0_0_60
                name: Front Porch Live Stream
                camera_view: live
                show_name: false
                show_state: false
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      max-width: 1500px;
                      height: 500px;
                      border-radius: 16px;
                      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                      overflow: hidden;
                      margin: 0;
                      padding: 0;
                    }
                    ha-card img {
                      object-fit: cover;
                      height: 100%;
                      width: 100%;
                    }
