title: Media
path: media
icon: mdi:lightbulb-group-music
panel: true
theme: default

cards:
  - type: custom:layout-card
    layout_type: custom:grid-layout
    layout:
      grid-template-columns: 1fr
      grid-auto-rows: min-content
      justify-content: stretch
      align-content: start
      gap: 16px
      padding: 16px

    cards:
      - !include _header.yaml

      - type: horizontal-stack
        cards:
          - type: custom:button-card
            icon: mdi:chevron-left
            tap_action:
              action: navigate
              navigation_path: /command-center/frontdoor
            styles:
              card:
                - height: 70px
                - width: 70px
                - border-radius: 50%
                - background: rgba(74, 158, 255, 0.95)
                - box-shadow: 0 4px 16px rgba(74, 158, 255, 0.5)
              icon:
                - width: 42px
                - height: 42px
                - color: white
              grid:
                - grid-template-areas: '"i"'
          - type: custom:button-card
            color_type: blank-card
            styles:
              card:
                - background: transparent
                - box-shadow: none
          - type: custom:button-card
            icon: mdi:chevron-right
            tap_action:
              action: navigate
              navigation_path: /command-center/home
            styles:
              card:
                - height: 70px
                - width: 70px
                - border-radius: 50%
                - background: rgba(74, 158, 255, 0.95)
                - box-shadow: 0 4px 16px rgba(74, 158, 255, 0.5)
              icon:
                - width: 42px
                - height: 42px
                - color: white
              grid:
                - grid-template-areas: '"i"'

      # === MEDIA BANNER WITH PHOTO TOGGLE ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 1fr auto
          gap: 16px
          align-items: center
        cards:
          # HOME MEDIA Title
          - type: custom:button-card
            name: HOME MEDIA
            icon: mdi:lightbulb-group-music
            show_name: true
            show_icon: true
            tap_action:
              action: none
            styles:
              card:
                - height: 30px
                - border-radius: 8px
                - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
                - box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3)
                - padding: 0 12px
              grid:
                - grid-template-areas: '"i n"'
                - grid-template-columns: auto 1fr
              icon:
                - width: 18px
                - height: 18px
                - color: white
                - margin-right: 8px
              name:
                - font-size: 1.1rem
                - font-weight: 700
                - color: white
                - justify-self: start
                - letter-spacing: 0.5px

          # Photo Toggle
          - type: custom:button-card
            entity: input_boolean.media_photos_visible
            name: Photos
            icon: mdi:image-multiple
            show_name: true
            show_icon: true
            show_state: false
            tap_action:
              action: toggle
            styles:
              card:
                - height: 30px
                - border-radius: 8px
                - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                - padding: 0 12px
              grid:
                - grid-template-areas: '"i n"'
                - grid-template-columns: auto 1fr
              icon:
                - width: 18px
                - height: 18px
                - margin-right: 6px
              name:
                - font-size: 0.95rem
                - font-weight: 600
            state:
              - value: 'on'
                styles:
                  card:
                    - background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)
                  icon:
                    - color: white
                  name:
                    - color: white
              - value: 'off'
                styles:
                  card:
                    - background: linear-gradient(135deg, #757F9A 0%, #D7DDE8 100%)
                  icon:
                    - color: white
                  name:
                    - color: white

      # === MAIN CONTENT (Media + Photos) ===
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-rows: 280px 420px
          gap: 16px
        cards:
          # === MEDIA CONTROLS (Top 280px) ===
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 220px 1fr 280px
              gap: 16px
            cards:
              # Album Art
              - type: custom:button-card
                entity: media_player.spotify_paul_sowu
                show_name: false
                show_state: false
                show_icon: false
                tap_action:
                  action: more-info
                styles:
                  card:
                    - width: 220px
                    - height: 220px
                    - border-radius: 12px
                    - background-size: cover
                    - background-position: center
                    - background-image: |
                        [[[
                          if (entity.attributes.entity_picture) {
                            return `url(${entity.attributes.entity_picture})`;
                          }
                          return 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                        ]]]
                    - box-shadow: 0 4px 16px rgba(0,0,0,0.3)

              # Song Info + Controls + Volume
              - type: vertical-stack
                cards:
                  # Song/Artist
                  - type: markdown
                    content: |
                      {% if states('media_player.spotify_paul_sowu') != 'unavailable' %}
                        <div style="text-align: center; font-size: 1.6rem; font-weight: 700; margin-bottom: 8px;">
                          {{ state_attr('media_player.spotify_paul_sowu', 'media_title') or 'No Song Playing' }}
                        </div>
                        <div style="text-align: center; font-size: 1.2rem; color: #999;">
                          {{ state_attr('media_player.spotify_paul_sowu', 'media_artist') or '' }}
                        </div>
                      {% else %}
                        <div style="text-align: center; font-size: 1.6rem; font-weight: 700;">Spotify Unavailable</div>
                      {% endif %}
                    card_mod:
                      style: |
                        ha-card {
                          box-shadow: none;
                          background: transparent;
                          padding: 12px 0 !important;
                        }

                  # Playback Controls
                  - type: custom:layout-card
                    layout_type: custom:grid-layout
                    layout:
                      grid-template-columns: repeat(6, 1fr)
                      gap: 12px
                    cards:
                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:shuffle
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.shuffle_set
                          service_data:
                            shuffle: |
                              [[[
                                return !entity.attributes.shuffle;
                              ]]]
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: |
                                [[[
                                  return entity.attributes.shuffle ? 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)' : 'rgba(255,255,255,0.1)';
                                ]]]
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 26px
                            - height: 26px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:skip-previous
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_previous_track
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_play_pause
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        icon: |
                          [[[
                            return entity.state === 'playing' ? 'mdi:pause' : 'mdi:play';
                          ]]]
                        styles:
                          card:
                            - width: 70px
                            - height: 70px
                            - border-radius: 50%
                            - background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
                            - box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4)
                          icon:
                            - width: 36px
                            - height: 36px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:skip-next
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.media_next_track
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: rgba(255,255,255,0.1)
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 30px
                            - height: 30px
                            - color: white

                      - type: custom:button-card
                        entity: media_player.spotify_paul_sowu
                        icon: mdi:repeat
                        show_name: false
                        tap_action:
                          action: call-service
                          service: media_player.repeat_set
                          service_data:
                            repeat: |
                              [[[
                                const current = entity.attributes.repeat;
                                if (current === 'off') return 'all';
                                if (current === 'all') return 'one';
                                return 'off';
                              ]]]
                          target:
                            entity_id: media_player.spotify_paul_sowu
                        styles:
                          card:
                            - width: 55px
                            - height: 55px
                            - border-radius: 50%
                            - background: |
                                [[[
                                  return entity.attributes.repeat !== 'off' ? 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)' : 'rgba(255,255,255,0.1)';
                                ]]]
                            - box-shadow: 0 2px 8px rgba(0,0,0,0.2)
                          icon:
                            - width: 26px
                            - height: 26px
                            - color: white

                  # Volume Slider
                  - type: entities
                    entities:
                      - entity: media_player.spotify_paul_sowu
                        type: custom:slider-entity-row
                        full_row: true
                    card_mod:
                      style: |
                        ha-card {
                          background: transparent;
                          box-shadow: none;
                          padding: 8px 0;
                        }

              # Quick Playlists
              - type: vertical-stack
                cards:
                  - type: custom:button-card
                    name: Afrobeats
                    icon: mdi:music-circle
                    show_name: true
                    show_icon: true
                    tap_action:
                      action: call-service
                      service: media_player.play_media
                      service_data:
                        media_content_type: playlist
                        media_content_id: spotify:playlist:16EIqiWgTZthuA32e1KrZw
                      target:
                        entity_id: media_player.spotify_paul_sowu
                    styles:
                      card:
                        - height: 70px
                        - border-radius: 12px
                        - background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%)
                        - box-shadow: 0 4px 12px rgba(240, 147, 251, 0.3)
                      grid:
                        - grid-template-areas: '"i n"'
                        - grid-template-columns: auto 1fr
                      icon:
                        - width: 28px
                        - height: 28px
                        - color: white
                        - margin-right: 12px
                      name:
                        - font-size: 1.2rem
                        - font-weight: 600
                        - color: white
                        - justify-self: start

                  - type: custom:button-card
                    name: Dancehall
                    icon: mdi:music-note
                    show_name: true
                    show_icon: true
                    tap_action:
                      action: call-service
                      service: media_player.play_media
                      service_data:
                        media_content_type: playlist
                        media_content_id: spotify:playlist:1LjTwJW7vz5MiEVZCwBOhr
                      target:
                        entity_id: media_player.spotify_paul_sowu
                    styles:
                      card:
                        - height: 70px
                        - border-radius: 12px
                        - background: linear-gradient(135deg, #fa709a 0%, #fee140 100%)
                        - box-shadow: 0 4px 12px rgba(250, 112, 154, 0.3)
                      grid:
                        - grid-template-areas: '"i n"'
                        - grid-template-columns: auto 1fr
                      icon:
                        - width: 28px
                        - height: 28px
                        - color: white
                        - margin-right: 12px
                      name:
                        - font-size: 1.2rem
                        - font-weight: 600
                        - color: white
                        - justify-self: start

                  - type: custom:button-card
                    name: Old Afrobeats
                    icon: mdi:music-box-multiple
                    show_name: true
                    show_icon: true
                    tap_action:
                      action: call-service
                      service: media_player.play_media
                      service_data:
                        media_content_type: playlist
                        media_content_id: spotify:playlist:0pwtPFYePn1xdpavFkurnh
                      target:
                        entity_id: media_player.spotify_paul_sowu
                    styles:
                      card:
                        - height: 70px
                        - border-radius: 12px
                        - background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)
                        - box-shadow: 0 4px 12px rgba(79, 172, 254, 0.3)
                      grid:
                        - grid-template-areas: '"i n"'
                        - grid-template-columns: auto 1fr
                      icon:
                        - width: 28px
                        - height: 28px
                        - color: white
                        - margin-right: 12px
                      name:
                        - font-size: 1.2rem
                        - font-weight: 600
                        - color: white
                        - justify-self: start

          # === PHOTOS SECTION (Bottom 420px) ===
          - type: conditional
            conditions:
              - entity: input_boolean.media_photos_visible
                state: 'on'
            card:
              type: markdown
              content: |
                <div style="text-align: center; padding: 180px 32px; font-size: 1.5rem; color: #999;">
                  ðŸ“¸ Google Photos slideshow will appear here<br><br>
                  <small>Configure Google Photos integration albums</small>
                </div>
              card_mod:
                style: |
                  ha-card {
                    height: 420px;
                    border-radius: 16px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    background: #1a1a1a;
                  }

          # Photos OFF
          - type: conditional
            conditions:
              - entity: input_boolean.media_photos_visible
                state: 'off'
            card:
              type: custom:button-card
              name: Photos Hidden
              icon: mdi:image-off
              show_name: true
              show_icon: true
              tap_action:
                action: none
              styles:
                card:
                  - height: 420px
                  - border-radius: 16px
                  - background: '#000000'
                  - box-shadow: 0 4px 12px rgba(0,0,0,0.15)
                grid:
                  - grid-template-areas: '"i" "n"'
                  - grid-template-rows: 1fr auto
                icon:
                  - width: 64px
                  - height: 64px
                  - color: '#333333'
                  - margin-bottom: 16px
                name:
                  - font-size: 1.5rem
                  - font-weight: 600
                  - color: '#333333'
